{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\Documents\\\\Spotify Project\\\\SPOTIFY-FRONTEND-GOOD\\\\spot\\\\src\\\\FileUpload.jsx\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport storage from \"./firebaseConfig\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar constants = require('/../constants');\nconsole.log(constants.url);\nfunction FileUpload(props) {\n  const formHandler = e => {\n    e.preventDefault();\n    const file = e.target[0].files[0];\n    uploadFiles(file, e.target[1].value, e.target[2].value, e.target[3].value);\n    props.setRefresh(true);\n  };\n  const uploadFiles = (file, name, artist, album) => {\n    // State to store uploaded file\n    const storageRef = ref(storage, `/files/${file.name}`);\n    const uploadTask = uploadBytesResumable(storageRef, file);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const prog = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      console.log(prog + '%');\n    }, err => console.log(err), () => {\n      getDownloadURL(uploadTask.snapshot.ref).then(url => {\n        const song = {\n          name,\n          artist,\n          url,\n          album\n        };\n        fetch(constants.url + \"/song/addSong\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(song)\n        }).then(() => {\n          console.log(\"New song added\");\n          props.setRefresh(false);\n        });\n        const artistPost = {\n          name: artist\n        };\n        fetch(constants.url + \"/artist/addArtist\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(artistPost)\n        }).then(() => {\n          console.log(\"New artist added\");\n        });\n        const albumPost = {\n          name: album\n        };\n        fetch(constants.url + \"/album/addAlbum\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(albumPost)\n        }).then(() => {\n          console.log(\"New album added\");\n        });\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        className: \"file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"songName\",\n        defaultValue: \"Song Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"artistName\",\n        defaultValue: \"Artist Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"albumName\",\n        defaultValue: \"Album Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["ref","uploadBytesResumable","getDownloadURL","storage","constants","require","console","log","url","FileUpload","props","formHandler","e","preventDefault","file","target","files","uploadFiles","value","setRefresh","name","artist","album","storageRef","uploadTask","on","snapshot","prog","Math","round","bytesTransferred","totalBytes","err","then","song","fetch","method","headers","body","JSON","stringify","artistPost","albumPost"],"sources":["C:/Users/Alex/Documents/Spotify Project/SPOTIFY-FRONTEND-GOOD/spot/src/FileUpload.jsx"],"sourcesContent":["import { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\r\nimport storage from \"./firebaseConfig\";\r\n\r\nvar constants = require('/../constants')\r\nconsole.log(constants.url);\r\n\r\nfunction FileUpload(props) {\r\n    const formHandler = (e) => {\r\n        e.preventDefault();\r\n        const file = e.target[0].files[0];\r\n        uploadFiles(file, e.target[1].value, e.target[2].value, e.target[3].value);\r\n        props.setRefresh(true);\r\n        };\r\n\r\n    const uploadFiles = (file, name, artist, album) => {\r\n            // State to store uploaded file\r\n        const storageRef = ref(storage, `/files/${file.name}`);\r\n        const uploadTask = uploadBytesResumable(storageRef, file);\r\n  \r\n        uploadTask.on(\"state_changed\", (snapshot) => {\r\n          const prog = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n          console.log(prog + '%');\r\n        }, (err) => console.log(err),\r\n        () => {\r\n            getDownloadURL(uploadTask.snapshot.ref)\r\n            .then(url => {\r\n              const song={name, artist, url, album};\r\n              fetch(constants.url + \"/song/addSong\",{\r\n                method:\"POST\",\r\n                headers:{\"Content-Type\":\"application/json\"},\r\n                body:JSON.stringify(song)\r\n            }).then(()=>{\r\n              console.log(\"New song added\");\r\n              props.setRefresh(false);\r\n            })\r\n\r\n            const artistPost = {name: artist};\r\n            fetch(constants.url + \"/artist/addArtist\",{\r\n              method:\"POST\",\r\n              headers:{\"Content-Type\":\"application/json\"},\r\n              body:JSON.stringify(artistPost)\r\n          }).then(()=>{\r\n            console.log(\"New artist added\");\r\n          })\r\n\r\n          const albumPost = {name: album};\r\n          fetch(constants.url + \"/album/addAlbum\",{\r\n            method:\"POST\",\r\n            headers:{\"Content-Type\":\"application/json\"},\r\n            body:JSON.stringify(albumPost)\r\n        }).then(()=>{\r\n          console.log(\"New album added\");\r\n        })\r\n\r\n            });\r\n\r\n        } );\r\n      }\r\n      return(\r\n        <div className=\"App\">\r\n            <form onSubmit={formHandler}>\r\n                <input type=\"file\" className=\"file\"/>\r\n                <input type=\"text\" name=\"songName\" defaultValue='Song Name'/>\r\n                <input type=\"text\" name=\"artistName\" defaultValue='Artist Name'/>\r\n                <input type=\"text\" name=\"albumName\" defaultValue='Album Name'/>\r\n                <button type=\"submit\">Upload</button>\r\n            </form>\r\n            <hr/>\r\n        </div>\r\n      );\r\n\r\n}\r\nexport default FileUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}